:original_name: dataartsstudio_01_4803.html

.. _dataartsstudio_01_4803:

Examples of Common EL Expressions
=================================

This section describes common EL expressions and examples.

.. table:: **Table 1** Common EL expressions

   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Method                                      | Description                                                                                                                                                                                                                                                 | Example                                                                                                                                                                                                                                                                                                                                                                                                                            |
   +=============================================+=============================================================================================================================================================================================================================================================+====================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | String getNodeStatus(String nodeName)       | Obtains the running status of a specified node. If the node runs properly, success is returned. If the node fails to run, fail is returned.                                                                                                                 | Obtains the running status of the test node:                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             | For example, to check whether a node is running successfully, you can use the following command, where **test** indicates the node name:                                                                                                                    | #{Job.getNodeStatus("test")}                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             | **#{(Job.getNodeStatus("test")) == "success" }**                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | String getNodeOutput(String nodeName)       | Obtains the output of a specified node. This method can only obtain the output of the previous dependent node.                                                                                                                                              | -  Obtains the output of the test node:                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |    #{Job.getNodeOutput("test")}                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | -  If the previous node has no execution result, the output is null.                                                                                                                                                                                                                                                                                                                                                               |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | -  If the output of a node is a field, the output result is in the format like **[["000"]]**. In this case, you can use the EL expression to split the string result and obtain the field value output by the previous node. Note that the output result type is string. If you want to output the original data type, you need to use the EL expression of the For Each node and the loop embedded objects supported by the node. |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |    #{StringUtil.split(StringUtil.split(StringUtil.split(Job.getNodeOutput("Name of the previous node"),"]")[0],"[")[0],"\\\\"")[0]}                                                                                                                                                                                                                                                                                                |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | -  If the output of a node contains two or more fields, the output result is in the format like **[["000"],["001"]]**. In this case, you need to obtain the output result using the EL expression of the For Each node and the loop embedded objects supported by the node, for example, **#{Loop.current[0]}**.                                                                                                                   |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | String getParam(String key)                 | Obtains job parameters.                                                                                                                                                                                                                                     | Obtains the value of the **test** parameter:                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             | This method only obtains the parameter values configured for the current job, but not parameter values passed from the parent job or the global variables configured for the workspace.                                                                     | #{Job.getParam("test")}                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             | To obtain the parameter values passed from the parent job and the global variables configured for the workspace, you are advised to use the ${job_param_name} expression.                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | String getPlanTime(String pattern)          | Obtains the plan time character string in a specified pattern. Pattern indicates the date and time mode. For details, see :ref:`Date and Time Mode <dataartsstudio_01_0496>`.                                                                               | Obtains the planned job scheduling time, which is accurate to millisecond:                                                                                                                                                                                                                                                                                                                                                         |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{Job.getPlanTime("yyyy-MM-dd HH:mm:ss:SSS")}                                                                                                                                                                                                                                                                                                                                                                                      |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | String getYesterday(String pattern)         | Obtains the time character string of the day before the plan time. Pattern indicates the date and time mode. For details, see :ref:`Date and Time Mode <dataartsstudio_01_0496>`.                                                                           | Obtains the time on the previous day of the planned job scheduling time, which is accurate to date:                                                                                                                                                                                                                                                                                                                                |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{Job.getYesterday("yyyy-MM-dd HH:mm:ss:SSS")}                                                                                                                                                                                                                                                                                                                                                                                     |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | String getLastHour(String pattern)          | Obtains the time character string of last hour before the plan time. Pattern indicates the date and time mode. For details, see :ref:`Date and Time Mode <dataartsstudio_01_0496>`.                                                                         | Obtains the time one hour before the planned job scheduling time, which is accurate to hour:                                                                                                                                                                                                                                                                                                                                       |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{Job.getLastHour("yyyy-MM-dd HH:mm:ss:SSS")}                                                                                                                                                                                                                                                                                                                                                                                      |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Date addDays(Date date, int amount)         | After the specified number of days is added to Date, the new Date object is returned. The amount can be a negative number.                                                                                                                                  | Subtracts one day from the planned job scheduling time and convert the time to the yyyy-MM-dd format.                                                                                                                                                                                                                                                                                                                              |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{DateUtil.format(DateUtil.addDays(Job.planTime,-1),"yyyy-MM-dd")}                                                                                                                                                                                                                                                                                                                                                                 |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | int getDay(Date date)                       | Obtains the day from the date. For example, if the date is 2018-09-14, 14 is returned.                                                                                                                                                                      | Obtain the day from the job scheduling plan.                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{DateUtil.getDay(Job.planTime)}                                                                                                                                                                                                                                                                                                                                                                                                   |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Date now()                                  | Returns the current time.                                                                                                                                                                                                                                   | Return the current time accurate to second.                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | #{DateUtil.format(DateUtil.now(),"yyyy-MM-dd HH:mm:ss")}                                                                                                                                                                                                                                                                                                                                                                           |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Object path(String jsonStr,String jsonPath) | Returns the field value in a path specified by the JSON character string. This method is similar to XPath and can be used to retrieve or set JSON by path. You can use . or [] in the path to access members and values. For example, tables[0].table_name. | The content of variable str is as follows:                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | .. code-block::                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |    {                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                             |                                                                                                                                                                                                                                                             |                "cities": [{                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                             |                                                                                                                                                                                                                                                             |                            "name": "city1",                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                             |                                                                                                                                                                                                                                                             |                            "areaCode": "1000"                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                             |                                                                                                                                                                                                                                                             |                },                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                             |                                                                                                                                                                                                                                                             |                {                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                             |                                                                                                                                                                                                                                                             |                            "name": "city2",                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                             |                                                                                                                                                                                                                                                             |                            "areaCode": "2000"                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                             |                                                                                                                                                                                                                                                             |                },                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                             |                                                                                                                                                                                                                                                             |                {                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                                             |                                                                                                                                                                                                                                                             |                            "name": "city3",                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                             |                                                                                                                                                                                                                                                             |                            "areaCode": "3000"                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                             |                                                                                                                                                                                                                                                             |                }]                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                             |                                                                                                                                                                                                                                                             |    }                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | The expression for obtaining the area code of city1 is as follows:                                                                                                                                                                                                                                                                                                                                                                 |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             | .. code-block::                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             |                                                                                                                                                                                                                                                             |    #{JSONUtil.path(str,"cities[0].areaCode")}                                                                                                                                                                                                                                                                                                                                                                                      |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | current                                     | For Each nodes process data in a dataset by row. **Loop.current** indicates a row of a two-dimensional array defined in the dataset of the For Each node. This row is a one-dimensional array.                                                              | The value of **Subjob Parameter** for the For Each node indicates that the second value in the traversed row of the two-dimensional array in the dataset is always used in the loop traversal of the For Each node.                                                                                                                                                                                                                |
   |                                             |                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                             | Generally, the format is similar to **#{Loop.current[0]}**, **#{Loop.current[1]}**, or others. **[0]** indicates the first value in the current row, **[1]** indicates the second value in the current row, and so on.                                      | #{Loop.current[1]}                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +---------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
