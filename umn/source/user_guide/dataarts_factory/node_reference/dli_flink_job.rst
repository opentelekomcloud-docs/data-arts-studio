:original_name: dataartsstudio_01_0536.html

.. _dataartsstudio_01_0536:

DLI Flink Job
=============

Function
--------

The DLI Flink Job node is used to execute a predefined DLI job for real-time analysis of streaming data.

Working Principles
------------------

This node enables you to start a DLI job or query whether a DLI job is running. If you do not select an existing Flink job, DLF creates and starts the job based on the job status configured on the node. You can customize jobs and job parameters.

Parameters
----------

For details about how to configure the parameters of DLI Flink jobs, see the following:

-  Property parameters:

   -  **Existing Flink job**: For details, see :ref:`Table 1 <dataartsstudio_01_0536__en-us_topic_0226206976_table647011333413>`.
   -  **Flink SQL job**: For details, see :ref:`Table 2 <dataartsstudio_01_0536__en-us_topic_0226206976_table0855143818117>`.
   -  **User-defined Flink job**: For details, see :ref:`Table 3 <dataartsstudio_01_0536__en-us_topic_0226206976_table3764823994826>`.

-  :ref:`Table 4 <dataartsstudio_01_0536__en-us_topic_0226206976_table58040457102411>`

.. _dataartsstudio_01_0536__en-us_topic_0226206976_table647011333413:

.. table:: **Table 1** Parameter parameters of an existing Flink job

   +-----------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Description                                                                                                                                                                             |
   +===========+===========+=========================================================================================================================================================================================+
   | Job Type  | Yes       | Select **Existing Flink job**.                                                                                                                                                          |
   +-----------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job Name  | Yes       | Name of an existing DLI Flink job.                                                                                                                                                      |
   +-----------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Node Name | Yes       | Name of a node. The name must contain 1 to 128 characters, including only letters, numbers, underscores (_), hyphens (-), slashes (/), less-than signs (<), and greater-than signs (>). |
   +-----------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _dataartsstudio_01_0536__en-us_topic_0226206976_table0855143818117:

.. table:: **Table 2** Property parameters of a Flink SQL job

   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                                     | Mandatory             | Description                                                                                                                                                                                                                                                                                                                                      |
   +===============================================+=======================+==================================================================================================================================================================================================================================================================================================================================================+
   | Job Type                                      | Yes                   | Select **Flink SQL job**. You can start a job by compiling SQL statements.                                                                                                                                                                                                                                                                       |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Script Path                                   | Yes                   | Path to a Flink SQL script to be executed. If the script is not created, create and develop the Flink SQL script by referring to :ref:`Creating a Script <dataartsstudio_01_0423>` and :ref:`Developing an SQL Script <dataartsstudio_01_0424>`.                                                                                                 |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | DLI Queue                                     | Yes                   | **Shared queues** are selected by default. You can also select a dedicated custom queue.                                                                                                                                                                                                                                                         |
   |                                               |                       |                                                                                                                                                                                                                                                                                                                                                  |
   |                                               |                       | .. note::                                                                                                                                                                                                                                                                                                                                        |
   |                                               |                       |                                                                                                                                                                                                                                                                                                                                                  |
   |                                               |                       |    During job creation, a sub-user can only select a queue that has been allocated to the user.                                                                                                                                                                                                                                                  |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | CUs                                           | Yes                   | A CU consists of 1 vCPU compute and 4 GB memory.                                                                                                                                                                                                                                                                                                 |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Concurrency                                   | Yes                   | The number of Flink SQL jobs that run at the same time.                                                                                                                                                                                                                                                                                          |
   |                                               |                       |                                                                                                                                                                                                                                                                                                                                                  |
   |                                               |                       | .. note::                                                                                                                                                                                                                                                                                                                                        |
   |                                               |                       |                                                                                                                                                                                                                                                                                                                                                  |
   |                                               |                       |    The value of **Concurrency** must not exceed the value obtained through the following formula: 4 x (Number of CUs - 1).                                                                                                                                                                                                                       |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | UDF Jar                                       | No                    | This parameter is valid only when you select a dedicated queue for **Queue**. Before selecting a UDF JAR resource package, upload the UDF JAR package to the OBS bucket and create resources on the **Manage Resource** page. For details, see :ref:`Creating a Resource <dataartsstudio_01_0519__en-us_topic_0165312432_section6325757145320>`. |
   |                                               |                       |                                                                                                                                                                                                                                                                                                                                                  |
   |                                               |                       | In SQL, you can call a user-defined function that is inserted into a JAR package.                                                                                                                                                                                                                                                                |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Auto Restart upon Exception                   | No                    | Indicates whether to enable automatic restart. If this function is enabled, any job that has become abnormal will be automatically restarted.                                                                                                                                                                                                    |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job Name                                      | Yes                   | Name of the DLI Flink job. It must consist of 1 to 64 characters and contain only letters, numbers, and underscores (**\_**). The default value is the same as the node name.                                                                                                                                                                    |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job name must be prefixed with workspace name | No                    | Whether to add a workspace prefix to the created job.                                                                                                                                                                                                                                                                                            |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Node Name                                     | Yes                   | Name of a node. The name must contain 1 to 128 characters, including only letters, numbers, underscores (_), hyphens (-), slashes (/), less-than signs (<), and greater-than signs (>).                                                                                                                                                          |
   +-----------------------------------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _dataartsstudio_01_0536__en-us_topic_0226206976_table3764823994826:

.. table:: **Table 3** Property parameters of a user-defined Flink job

   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                                     | Mandatory             | Description                                                                                                                                                                                                                                                                                                   |
   +===============================================+=======================+===============================================================================================================================================================================================================================================================================================================+
   | Job Type                                      | Yes                   | Select **User-defined Flink job**.                                                                                                                                                                                                                                                                            |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | JAR Package Path                              | Yes                   | User-defined package. Before selecting a package, upload the JAR package to the OBS bucket and create resources on the **Manage Resource** page. For details, see :ref:`Creating a Resource <dataartsstudio_01_0519__en-us_topic_0165312432_section6325757145320>`.                                           |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Main Class                                    | Yes                   | Name of the JAR package to be loaded, for example, **KafkaMessageStreaming**.                                                                                                                                                                                                                                 |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       | -  **Default**: Specified based on the **Manifest** file in the JAR package.                                                                                                                                                                                                                                  |
   |                                               |                       | -  **Manually assign**: Enter the class name and confirm the class arguments (separate arguments with spaces).                                                                                                                                                                                                |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       |    .. note::                                                                                                                                                                                                                                                                                                  |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       |       When a class belongs to a package, the package path must be carried, for example, **packagePath.KafkaMessageStreaming**.                                                                                                                                                                                |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Main Class Parameter                          | Yes                   | List of parameters of a specified class. The parameters are separated by spaces.                                                                                                                                                                                                                              |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | DLI Queue                                     | Yes                   | **Shared queues** are selected by default. You can also select a dedicated custom queue.                                                                                                                                                                                                                      |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       | .. note::                                                                                                                                                                                                                                                                                                     |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       |    During job creation, a sub-user can only select a queue that has been allocated to the user.                                                                                                                                                                                                               |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job Type                                      | No                    | Select a custom image and the corresponding version. This parameter is available only when the DLI queue is a containerized queue.                                                                                                                                                                            |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       | A custom image is a feature of DLI. You can use the Spark or Flink basic images provided by DLI to pack the dependencies (files, JAR packages, or software) required into an image using Dockerfile, generate a custom image, and release the image to SWR. Then, select the generated image and run the job. |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       | Custom images can change the container runtime environments of Spark and Flink jobs. You can embed private capabilities into custom images to enhance the functions and performance of jobs.                                                                                                                  |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | CUs                                           | Yes                   | A CU consists of 1 vCPU compute and 4 GB memory.                                                                                                                                                                                                                                                              |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Number of management node CUs                 | Yes                   | Set the number of CUs on a management unit. The value ranges from 1 to 4. The default value is **1**.                                                                                                                                                                                                         |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Concurrency                                   | Yes                   | The number of Flink SQL jobs that run at the same time.                                                                                                                                                                                                                                                       |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       | .. note::                                                                                                                                                                                                                                                                                                     |
   |                                               |                       |                                                                                                                                                                                                                                                                                                               |
   |                                               |                       |    The value of **Concurrency** must not exceed the value obtained through the following formula: 4 x (Number of CUs - 1).                                                                                                                                                                                    |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Auto Restart upon Exception                   | No                    | Indicates whether to enable automatic restart. If this function is enabled, any job that has become abnormal will be automatically restarted.                                                                                                                                                                 |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job Name                                      | Yes                   | Name of the DLI Flink job. It must consist of 1 to 64 characters and contain only letters, numbers, and underscores (**\_**). The default value is the same as the node name.                                                                                                                                 |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Job name must be prefixed with workspace name | No                    | Whether to add a workspace prefix to the created job.                                                                                                                                                                                                                                                         |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Node Name                                     | Yes                   | Name of a node. The name must contain 1 to 128 characters, including only letters, numbers, underscores (_), hyphens (-), slashes (/), less-than signs (<), and greater-than signs (>).                                                                                                                       |
   +-----------------------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _dataartsstudio_01_0536__en-us_topic_0226206976_table58040457102411:

.. table:: **Table 4** Advanced parameters

   +------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                    | Mandatory             | Description                                                                                                                                                                                 |
   +==============================+=======================+=============================================================================================================================================================================================+
   | Max. Node Execution Duration | Yes                   | Execution timeout interval for the node. If retry is configured and the execution is not complete within the timeout interval, the node will not be retried and is set to the failed state. |
   +------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Retry upon Failure           | Yes                   | Indicates whether to re-execute a node task if its execution fails. Possible values:                                                                                                        |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       | -  **Yes**: The node task will be re-executed, and the following parameters must be configured:                                                                                             |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       |    -  **Maximum Retries**                                                                                                                                                                   |
   |                              |                       |    -  **Retry Interval (seconds)**                                                                                                                                                          |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       | -  **No**: The node task will not be re-executed. This is the default setting.                                                                                                              |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       | .. note::                                                                                                                                                                                   |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       |    If **Timeout Interval** is configured for the node, the node will not be executed again after the execution times out. Instead, the node is set to the failure state.                    |
   +------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Failure Policy               | Yes                   | Operation that will be performed if the node task fails to be executed. Possible values:                                                                                                    |
   |                              |                       |                                                                                                                                                                                             |
   |                              |                       | -  **End the current job execution plan**: stops running the current job. The job instance status is **Failed**.                                                                            |
   |                              |                       | -  **Go to the next node**: ignores the execution failure of the current node. The job instance status is **Failure ignored**.                                                              |
   |                              |                       | -  **Suspend current job execution plan**: suspends running the current job. The job instance status is **Waiting**.                                                                        |
   |                              |                       | -  **Suspend execution plans of the subsequent nodes**: stops running subsequent nodes. The job instance status is **Failed**.                                                              |
   +------------------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
