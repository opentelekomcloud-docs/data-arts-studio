:original_name: dataartsstudio_01_0353.html

.. _dataartsstudio_01_0353:

Creating a MySQL Connection
===========================

This section describes how to create a MySQL connection between DataArts Studio and the data lake base.

Prerequisites
-------------

-  You have created a data lake to connect, for example, a database or cloud service supported by DataArts Studio.

   -  Before creating a DWS data connection, ensure that you have created a cluster in DWS and have the permissions required to view Key Management Service (KMS) keys.
   -  Before creating an MRS connection such as an MRS HBase and MRS Hive connection, ensure that you have created an MRS cluster and selected required components.

-  The data lake to connect communicates with the DataArts Studio instance properly.

   -  If the data lake is an on-premises database, a public network or a dedicated connection is required. Ensure that the host where the data source is located can access the public network and the port has been enabled in the firewall rule.
   -  If the data lake is a cloud service (such as DWS and MRS), the following requirements must be met for network interconnection:

      -  If the CDM cluster in the DataArts Studio instance and the cloud service are in different regions, a public network or a dedicated connection is required.
      -  If the CDM cluster in the DataArts Studio instance and the cloud service are in the same region, VPC, subnet, and security group, they can communicate with each other by default. If they are in the same VPC but in different subnets or security groups, you must configure routing rules and security group rules. For details about how to configure routing rules, see "Adding a Custom Route" in *Virtual Private Cloud (VPC) Usage Guide*. For details about how to configure security group rules, see "Security Group" > "Adding a Security Group Rule" in *Virtual Private Cloud (VPC) Usage Guide*.
      -  The cloud service instance and the DataArts Studio workspace belong to the same enterprise project. If they do not, you can modify the enterprise project of the workspace.

-  If the enterprise mode is used, pay attention to the following points:

   In enterprise mode, the development environment and production environment need to be distinguished. Therefore, you need to prepare two sets of data lake services for the production environment and development environment to isolate the development environment from the production environment.

   -  **If two clusters are used** for clustered data sources, such as MRS, GaussDB(DWS), RDS, MySQL, Oracle, DIS, and ECS, you can create data connections in Management Center to distinguish data lake services in the development environment from those in the production environment. The data lake is automatically switched during development and production. Therefore, you need to prepare two sets of data lake services. The versions, specifications, components, regions, VPCs, subnets, and related configurations of the two sets of data lake services must be the same. For details on how to create data connections, see :ref:`Creating a Data Connection <dataartsstudio_01_1299>`.
   -  For serverless services (such as DLI), DataArts Studio configures the mapping between data lake services in the production environment and development environment through environment isolation in the management center. The corresponding data lake is automatically switched during the development and production processes. Therefore, you need to prepare two sets of queues and database resources in the serverless data lake service and distinguish them by name suffix. For details, see :ref:`Configuring Environment Isolation for a Workspace in Enterprise Mode <dataartsstudio_01_5105>`.
   -  For GaussDB(DWS), MRS Hive, and MRS Spark, if you **select the same cluster** when creating a data connection, you must configure database mapping on the **Configure Data Source Resource Mapping** page to isolate the development and production environments. For details, see :ref:`DB configuration <dataartsstudio_01_5105__section20609134272018>`.

   For example, if your data lake service is an MRS cluster, you need to prepare two MRS clusters with the same version, specifications, components, region, VPC, and subnet. If some configurations of an MRS cluster are modified, you also need to synchronize the modifications to the other MRS cluster.

Creating a Data Connection
--------------------------

#. Log in to the DataArts Studio console by following the instructions in :ref:`Accessing the DataArts Studio Instance Console <dataartsstudio_01_0001>`.

#. On the DataArts Studio console, locate a workspace and click **Management Center**.

#. On the displayed **Manage Data Connections** page, click **Create Data Connection**.


   .. figure:: /_static/images/en-us_image_0000002305439529.png
      :alt: **Figure 1** Creating a data connection

      **Figure 1** Creating a data connection

#. On the **Manage Data Connections** page, click **Create Data Connection**. On the displayed page, select **RDS** for **Data Connection Type** and set other parameters based on the descriptions in :ref:`Table 1 <dataartsstudio_01_0353__table11826143220444>`.

   .. note::

      -  You are not advised to select **MySQL (pending offline)** for **Data Connection Type**. Instead, You are advised to select **RDS**.
      -  RDS data connections depend on OBS. If OBS is unavailable in the same region as DataArts Studio, RDS data connections are not supported.


   .. figure:: /_static/images/en-us_image_0000002270791124.png
      :alt: **Figure 2** RDS connection parameters

      **Figure 2** RDS connection parameters

   .. _dataartsstudio_01_0353__table11826143220444:

   .. table:: **Table 1** RDS connection

      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                                                       | Mandatory             | Description                                                                                                                                                                                                                                                                                                                                                                                              |
      +=================================================================+=======================+==========================================================================================================================================================================================================================================================================================================================================================================================================+
      | Data Connection Type                                            | Yes                   | **RDS** is selected by default and cannot be changed.                                                                                                                                                                                                                                                                                                                                                    |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Name                                                            | Yes                   | Name of the data connection to create. Data connection names can contain a maximum of 100 characters. They can contain only letters, digits, underscores (_), and hyphens (-).                                                                                                                                                                                                                           |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tag                                                             | No                    | Attribute of the data connection to create. Tags make management easier.                                                                                                                                                                                                                                                                                                                                 |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       |    The tag name can contain only letters, digits, and underscores (_) and cannot start with an underscore (_) or contain more than 100 characters.                                                                                                                                                                                                                                                       |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Applicable Modules                                              | Yes                   | Select the modules for which this connection is available.                                                                                                                                                                                                                                                                                                                                               |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | All modules are selected by default, which means this connection is available for all the modules that support the data source connected by this connection. For details about the data sources supported by each module, see :ref:`Data Sources <dataartsstudio_01_0005_0>`.                                                                                                                            |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | **Basic and Network Connectivity Configuration**                |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | IP Address or Domain Name                                       | Yes                   | Address for accessing the relational database data source. The value can be an IP address or a domain name.                                                                                                                                                                                                                                                                                              |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  If the data source is RDS, you can obtain the address on the management console by performing the following operations:                                                                                                                                                                                                                                                                               |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       |    a. Log in to the management console of the corresponding cloud service using the account you have obtained.                                                                                                                                                                                                                                                                                           |
      |                                                                 |                       |    b. In the left navigation pane, choose **Instances**.                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                 |                       |    c. Click the name of an instance to enter the basic information page. In the **Connection Information** area, you can obtain the private IP address, domain name, and port number.                                                                                                                                                                                                                    |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  If the data source is MySQL, PostgreSQL, or DM, you can obtain the access address from the database administrator.                                                                                                                                                                                                                                                                                    |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Port                                                            | Yes                   | Port for accessing the relational database.                                                                                                                                                                                                                                                                                                                                                              |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  If the data source is RDS, you can obtain the address on the management console by performing the following operations:                                                                                                                                                                                                                                                                               |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       |    a. Log in to the management console of the corresponding cloud service using the account you have obtained.                                                                                                                                                                                                                                                                                           |
      |                                                                 |                       |    b. In the left navigation pane, choose **Instances**.                                                                                                                                                                                                                                                                                                                                                 |
      |                                                                 |                       |    c. Click the name of an instance to enter the basic information page. In the **Connection Information** area, you can obtain the private IP address, domain name, and port number.                                                                                                                                                                                                                    |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  If the data source is MySQL, PostgreSQL, or DM, you can obtain the access address from the database administrator.                                                                                                                                                                                                                                                                                    |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | KMS Key                                                         | Yes                   | KMS key used to encrypt and decrypt the authentication information for the data source                                                                                                                                                                                                                                                                                                                   |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Agent                                                           | Yes                   | RDS is not a fully managed service and cannot be directly connected to DataArts Studio. A CDM cluster can provide an agent for DataArts Studio to communicate with non-fully-managed services. Therefore, you need to select a CDM cluster when creating an RDS data connection. If no CDM cluster is available, create one first.                                                                       |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | As a network proxy, the CDM cluster must be able to communicate with RDS. To ensure network connectivity, the CDM cluster must be in the same region, AZ, VPC, and subnet as RDS. The security group rule must also allow the CDM cluster to communicate with RDS.                                                                                                                                       |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       |    If a CDM cluster functions as the agent for a data connection in Management Center, the cluster supports a maximum of 200 concurrent active threads. If multiple data connections share an agent, a maximum of 200 SQL, Shell, and Python scripts submitted through the connections can run concurrently. Excess tasks will be queued. You are advised to plan multiple agents based on the workload. |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | **Data Source Driver Configuration**                            |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Driver Name                                                     | Yes                   | The name of the driver. The following values are available:                                                                                                                                                                                                                                                                                                                                              |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  **com.mysql.jdbc.Driver**: Select this driver name for RDS for MySQL or MySQL.                                                                                                                                                                                                                                                                                                                        |
      |                                                                 |                       | -  **org.postgresql.Driver**: Select this driver name for RDS for PostgreSQL or PostgreSQL.                                                                                                                                                                                                                                                                                                              |
      |                                                                 |                       | -  **com.microsoft.sqlserver.jdbc.SQLServerDriver**: Select this driver name for RDS for SQL Server.                                                                                                                                                                                                                                                                                                     |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Driver File Path                                                | Yes                   | It specifies the OBS path where the driver file is located. You need to download a .jar driver file from the corresponding official website and upload it to OBS.                                                                                                                                                                                                                                        |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  MySQL driver: Download it from https://downloads.mysql.com/archives/c-j/. The 5.1.48 version is recommended.                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | -  PostgreSQL driver: Download it from https://mvnrepository.com/artifact/org.postgresql/postgresql. The 42.3.4 version is recommended.                                                                                                                                                                                                                                                                  |
      |                                                                 |                       | -  SQL Server driver: Download it from https://learn.microsoft.com/en-us/sql/connect/jdbc/download-microsoft-jdbc-driver-for-sql-server?view=sql-server-ver16. The 8.4.1 version is recommended.                                                                                                                                                                                                         |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                                                 |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                                                 |                       |    -  The OBS path of the driver file cannot contain Chinese characters.                                                                                                                                                                                                                                                                                                                                 |
      |                                                                 |                       |    -  To update the driver, you must restart the CDM cluster in DataArts Migration and then edit the data connection to upload the driver.                                                                                                                                                                                                                                                               |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | **Data Source Authentication and Other Function Configuration** |                       |                                                                                                                                                                                                                                                                                                                                                                                                          |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Username                                                        | Yes                   | The username of the database. The username is required for creating a cluster.                                                                                                                                                                                                                                                                                                                           |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Password                                                        | Yes                   | The password for accessing the database. The password is required for creating a cluster.                                                                                                                                                                                                                                                                                                                |
      +-----------------------------------------------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. Click **Test** to test connectivity of the data connection. If the test fails, the data connection fails to be created.

#. After the test is successful, click **OK** to create the data connection.

Reference
---------

#. What Are the Precautions for Creating an RDS Data Connection?

   When creating an RDS data connection, you need to bind an agent provided by the CDM cluster. Currently, a version of the CDM cluster earlier than 1.8.6 is not supported.
