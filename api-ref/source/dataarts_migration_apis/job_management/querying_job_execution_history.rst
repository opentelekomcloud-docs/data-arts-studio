:original_name: ShowSubmissions.html

.. _ShowSubmissions:

Querying Job Execution History
==============================

Function
--------

This API is used to query the job execution history.

URI
---

GET /v1.1/{project_id}/clusters/{cluster_id}/cdm/submissions

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ===========
   Parameter  Mandatory Type   Description
   ========== ========= ====== ===========
   project_id Yes       String Project ID
   cluster_id Yes       String Cluster ID
   ========== ========= ====== ===========

.. table:: **Table 2** Query Parameters

   ========= ========= ====== ===========
   Parameter Mandatory Type   Description
   ========= ========= ====== ===========
   jname     Yes       String Job name
   ========= ========= ====== ===========

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +--------------+-----------+--------+----------------------------------------------------------------------------------------------------------+
   | Parameter    | Mandatory | Type   | Description                                                                                              |
   +==============+===========+========+==========================================================================================================+
   | X-Auth-Token | Yes       | String | User token. It can be obtained by calling the IAM API (value of X-Subject-Token in the response header). |
   +--------------+-----------+--------+----------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +-------------+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | Parameter   | Type                                                                      | Description                                                                              |
   +=============+===========================================================================+==========================================================================================+
   | submissions | Array of :ref:`Submission <showsubmissions__response_submission>` objects | Job running information. For details, see the descriptions of **submission** parameters. |
   +-------------+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | total       | Integer                                                                   | Total number of historical records for a job                                             |
   +-------------+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | page_no     | Integer                                                                   | Page number                                                                              |
   +-------------+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | page_size   | Integer                                                                   | Number of records on each page. The default value is **10**.                             |
   +-------------+---------------------------------------------------------------------------+------------------------------------------------------------------------------------------+

.. _showsubmissions__response_submission:

.. table:: **Table 5** Submission

   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                        | Description                                                                                                                                                       |
   +=======================+=============================================================+===================================================================================================================================================================+
   | isIncrementing        | Boolean                                                     | Whether the job migrates incremental data                                                                                                                         |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | job-name              | String                                                      | Job name                                                                                                                                                          |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | counters              | :ref:`counters <showsubmissions__response_counters>` object | Job running result statistics. This parameter is available only when **status** is **SUCCEEDED**. For details, see the description of the **counters** parameter. |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | isStopingIncrement    | String                                                      | Whether to stop incremental data migration                                                                                                                        |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is-execute-auto       | Boolean                                                     | Whether to execute the job as scheduled                                                                                                                           |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last-update-date      | Long                                                        | Time when the job was last updated                                                                                                                                |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last-udpate-user      | String                                                      | User who last updated the job status                                                                                                                              |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | isDeleteJob           | Boolean                                                     | Whether to delete the job after it is executed                                                                                                                    |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | creation-user         | String                                                      | User who created the job                                                                                                                                          |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | creation-date         | Long                                                        | Creation time                                                                                                                                                     |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | external-id           | String                                                      | Job ID                                                                                                                                                            |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | progress              | Float                                                       | Job progress. If a job fails, the value is **-1**. Otherwise, the value ranges from 0 to 100.                                                                     |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | submission-id         | Integer                                                     | Job submission ID                                                                                                                                                 |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | delete_rows           | Integer                                                     | Number of deleted rows                                                                                                                                            |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_rows           | Integer                                                     | Number of updated rows                                                                                                                                            |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | write_rows            | Integer                                                     | Number of written rows                                                                                                                                            |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | execute-date          | Long                                                        | Execution time                                                                                                                                                    |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                                                      | Job status                                                                                                                                                        |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **BOOTING**: The job is starting.                                                                                                                              |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **FAILURE_ON_SUBMIT**: The job failed to be submitted.                                                                                                         |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **RUNNING**: The job is running.                                                                                                                               |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **SUCCEEDED**: The job was successfully executed.                                                                                                              |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **FAILED**: The job execution failed.                                                                                                                          |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **UNKNOWN**: The job status is unknown.                                                                                                                        |
   |                       |                                                             |                                                                                                                                                                   |
   |                       |                                                             | -  **NEVER_EXECUTED**: The job was not executed.                                                                                                                  |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error-details         | String                                                      | Error details. This parameter is available only when **status** is **FAILED**.                                                                                    |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error-summary         | String                                                      | Error summary. This parameter is available only when **status** is **FAILED**.                                                                                    |
   +-----------------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _showsubmissions__response_counters:

.. table:: **Table 6** counters

   +---------------------------------------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | Parameter                                         | Type                                                      | Description                                                                                 |
   +===================================================+===========================================================+=============================================================================================+
   | org.apache.sqoop.submission.counter.SqoopCounters | :ref:`counter <showsubmissions__response_counter>` object | Job running result statistics. For details, see the descriptions of **counter** parameters. |
   +---------------------------------------------------+-----------------------------------------------------------+---------------------------------------------------------------------------------------------+

.. _showsubmissions__response_counter:

.. table:: **Table 7** counter

   ==================== ======= ================================
   Parameter            Type    Description
   ==================== ======= ================================
   BYTES_WRITTEN        Long    Number of bytes that are written
   TOTAL_FILES          Integer Total number of files
   ROWS_READ            Long    Number of rows that are read
   BYTES_READ           Long    Number of bytes that are read
   ROWS_WRITTEN         Long    Number of rows that are written
   FILES_WRITTEN        Integer Number of files that are written
   FILES_READ           Integer Number of files that are read
   TOTAL_SIZE           Long    Total number of bytes
   FILES_SKIPPED        Integer Number of files that are skipped
   ROWS_WRITTEN_SKIPPED Long    Number of rows that are skipped
   ==================== ======= ================================

Example Requests
----------------

.. code-block:: text

   GET /v1.1/1551c7f6c808414d8e9f3c514a170f2e/clusters/6ec9a0a4-76be-4262-8697-e7af1fac7920/cdm/submissions?jname=jdbc2hive

Example Responses
-----------------

**Status code: 200**

ok

.. code-block::

   {
     "submissions" : [ {
       "job-name" : "jdbc2hive",
       "creation-user" : "cdm",
       "creation-date" : "1536905778725",
       "progress" : 1,
       "status" : "BOOTING"
     } ]
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         ok
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
